<!doctype html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <title>Good vs Wicked — Poster Look</title>
  <link
    href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Noto+Serif+SC:wght@200;700&display=swap"
    rel="stylesheet">

  <style>
    :root {
      /* 从你参考图里抽出来的“低饱和”倾向 */
      --ink: #11180e;
      --deepGreen: #293823;
      --emeraldGlow: #80b878;
      --brass: #bfa16f;
      --parchment: #ebd8c8;
      --parchment2: #d4b8a3;
      --blush: #d0ada5;
      --ivory: #f6e7de;

      /* 你原本的点缀色，做成“光”而不是“纯色块” */
      --wicked: #00a859;
      --good: #f896c2;

      --bg: #050505;

      /* 质感强度（调参入口） */
      --bloom: .55;
      /* 彩雾散射 */
      --grain: .08;
      /* 颗粒 */
      --vignette: .88;
      /* 暗角 */

      /* 指针高光 */
      --mx: 50%;
      --my: 45%;


      --frameScale: .80;
      /* 框缩到屏幕的 92%（0.86~0.96 都常用） */
      --frameZ: 1;
      /* 框的层级：1=在贴图下面；7=在贴图上面；8=在闪粉下面 */
      --frameShiftY: -15vmin;
    }

    * {
      box-sizing: border-box;
    }

    html,
    body {
      height: 100%;
    }

    body {
      margin: 0;
      font-family: "Noto Serif SC", serif;
      background: var(--bg);
      overflow: hidden;
      color: #eaeaea;
    }

    .stage {
      position: relative;
      width: 100vw;
      height: 100vh;
      isolation: isolate;
    }

    /* 暗角 */
    .stage::before {
      content: "";
      position: absolute;
      inset: 0;
      z-index: 1;
      pointer-events: none;
      opacity: var(--vignette);
      background: radial-gradient(circle at 50% 40%,
          rgba(0, 0, 0, 0) 40%,
          rgba(0, 0, 0, .55) 72%,
          rgba(0, 0, 0, .95) 100%);
    }

    /* 颗粒（很淡就高级） */
    .stage::after {
      content: "";
      position: absolute;
      inset: 0;
      z-index: 9;
      pointer-events: none;
      opacity: var(--grain);
      mix-blend-mode: overlay;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='.35'/%3E%3C/svg%3E");
      background-size: 220px 220px;
    }

    /* 背景底：先做左右色域（更像海报），再叠你的 bg_full */
    .bg {
      position: absolute;
      inset: 0;
      z-index: 0;
      background:
        linear-gradient(90deg,
          rgba(7, 22, 13, 1) 0%,
          rgba(9, 24, 14, 1) 45%,
          rgba(22, 10, 16, 1) 55%,
          rgba(255, 241, 248, .80) 100%);
    }

    .bg img {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      opacity: .92;
      filter: contrast(1.08) saturate(1.05);
      transform: scale(1.01);
    }

    /* 星尘漂移（很克制） */
    .bg::before {
      content: "";
      position: absolute;
      inset: -10%;
      pointer-events: none;
      z-index: 0;
      opacity: .45;
      mix-blend-mode: screen;
      filter: blur(.25px);
      background-image:
        radial-gradient(2px 2px at 12% 22%, rgba(255, 255, 255, .30) 45%, transparent 60%),
        radial-gradient(1px 1px at 28% 78%, rgba(255, 255, 255, .18) 45%, transparent 60%),
        radial-gradient(1px 1px at 61% 15%, rgba(255, 255, 255, .18) 45%, transparent 60%),
        radial-gradient(2px 2px at 74% 56%, rgba(255, 255, 255, .15) 45%, transparent 60%),
        radial-gradient(1px 1px at 88% 34%, rgba(255, 255, 255, .18) 45%, transparent 60%);
      animation: starDrift 48s linear infinite;
      will-change: transform, opacity;
    }

    @keyframes starDrift {
      from {
        transform: translate3d(0, 0, 0);
        opacity: .38;
      }

      50% {
        opacity: .52;
      }

      to {
        transform: translate3d(4%, -3%, 0);
        opacity: .38;
      }
    }

    /* 彩雾散射：让画面像“印刷 + 舞台灯” */
    .bg::after {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      opacity: var(--bloom);
      filter: blur(26px);
      mix-blend-mode: screen;
      background:
        radial-gradient(46% 58% at 18% 44%, rgba(0, 168, 89, .18), transparent 68%),
        radial-gradient(46% 58% at 84% 28%, rgba(248, 150, 194, .14), transparent 70%),
        radial-gradient(56% 42% at 54% 72%, rgba(197, 160, 89, .10), transparent 72%);
    }

    .layer {
      position: absolute;
      inset: 0;
      z-index: 2;
      pointer-events: none;
    }

    .half {
      position: absolute;
      top: 0;
      bottom: 0;
      width: 50%;
    }

    .left {
      left: 0;
    }

    .right {
      right: 0;
    }

    /* 左侧：绿雾+闪电（纯 CSS 兜底；你有 overlay 图更好） */
    .left::before {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      opacity: .55;
      mix-blend-mode: screen;
      background:
        radial-gradient(60% 50% at 30% 45%, rgba(0, 168, 89, .25), transparent 62%),
        radial-gradient(50% 40% at 25% 70%, rgba(128, 184, 120, .18), transparent 65%),
        linear-gradient(180deg, rgba(0, 0, 0, .30), transparent 40%, rgba(0, 0, 0, .20));
      filter: blur(6px);
    }

    .left::after {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      opacity: .18;
      mix-blend-mode: screen;
      background:
        radial-gradient(2px 120px at 26% 40%, rgba(128, 184, 120, .65), transparent 60%),
        radial-gradient(2px 160px at 36% 52%, rgba(0, 168, 89, .55), transparent 60%),
        radial-gradient(2px 140px at 18% 62%, rgba(128, 184, 120, .50), transparent 60%);
      animation: lightningFlicker 6.5s ease-in-out infinite;
    }

    @keyframes lightningFlicker {

      0%,
      86%,
      100% {
        opacity: .10;
      }

      88% {
        opacity: .26;
      }

      90% {
        opacity: .12;
      }

      92% {
        opacity: .22;
      }
    }

    /* 右侧：珠光渐变 + 泡泡高光点（纯 CSS 兜底） */
    .right::before {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      opacity: .55;
      background:
        radial-gradient(80% 70% at 70% 35%, rgba(246, 231, 222, .75), transparent 64%),
        radial-gradient(60% 52% at 78% 22%, rgba(208, 173, 165, .55), transparent 62%),
        radial-gradient(50% 48% at 62% 52%, rgba(255, 255, 255, .25), transparent 65%),
        linear-gradient(180deg, rgba(255, 241, 248, .55), rgba(0, 0, 0, 0) 55%);
      filter: blur(7px);
      mix-blend-mode: screen;
    }

    .right::after {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      opacity: .35;
      background-image:
        radial-gradient(14px 14px at 78% 18%, rgba(255, 255, 255, .35) 40%, transparent 60%),
        radial-gradient(10px 10px at 86% 26%, rgba(255, 255, 255, .25) 40%, transparent 60%),
        radial-gradient(18px 18px at 72% 42%, rgba(255, 255, 255, .22) 40%, transparent 60%),
        radial-gradient(12px 12px at 92% 40%, rgba(255, 255, 255, .18) 40%, transparent 60%);
      filter: blur(.2px);
      mix-blend-mode: screen;
      animation: bubbleTwinkle 7.8s ease-in-out infinite;
    }

    @keyframes bubbleTwinkle {

      0%,
      100% {
        opacity: .28;
      }

      50% {
        opacity: .42;
      }
    }

    /* 随机漂浮包装：只负责动 */
    .floatWrap {
      width: 100%;
      height: 100%;
      display: block;
      will-change: transform;
    }

    /* 齿轮转动：只动 img */
    @keyframes gearSpin {
      to {
        transform: rotate(360deg);
      }
    }

    .sprite.spinSlow img {
      animation: gearSpin 24s linear infinite;
    }

    .sprite.spinSlowReverse img {
      animation: gearSpin 32s linear infinite reverse;
    }

    /* 插槽系统（保留你的核心逻辑） */
    .sprite {
      position: absolute;
      left: calc(var(--x, 0)*1%);
      top: calc(var(--y, 0)*1%);
      width: clamp(76px, calc(var(--w, 20)*1%), 980px);
      aspect-ratio: var(--ar, 1/1);
      height: auto;

      /* ✅ 稳定的自动缩小 padding（你原先那句在不少浏览器会失效） */
      --pad: var(--pad, 0.10);
      padding: clamp(0px, calc(var(--pad)*100%), 60px);

      background: transparent;
      border: none;
      box-shadow: none;
      border-radius: 18px;
      overflow: visible;

      transform: translate3d(var(--px, 0px), var(--py, 0px), 0);
      will-change: transform;

    }

    .sprite[data-anchor="bottom"] {
      top: auto;
      bottom: calc(var(--y, 0) * 1%);
    }

    /* 缺图才显示占位框，避免“编辑器感” */
    .sprite[data-missing="1"] {
      overflow: hidden;
      background:
        linear-gradient(rgba(0, 0, 0, .38), rgba(0, 0, 0, .38)) padding-box,
        linear-gradient(135deg, rgba(0, 168, 89, .35), rgba(191, 161, 111, .30), rgba(208, 173, 165, .35)) border-box;
      border: 1px dashed transparent;
      box-shadow: 0 18px 55px rgba(0, 0, 0, .35);
    }

    .sprite[data-missing="1"]::after {
      content: attr(data-name);
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 18px;
      font-family: "Cinzel", serif;
      letter-spacing: .18em;
      font-size: 12px;
      color: rgba(191, 161, 111, .78);
      text-transform: uppercase;
      background: linear-gradient(180deg, rgba(0, 0, 0, .06), rgba(0, 0, 0, .50));
    }

    /* 有图时加一点“空气光” */
    .sprite:not([data-missing="1"])::before {
      content: "";
      position: absolute;
      inset: -28%;
      pointer-events: none;
      opacity: .52;
      filter: blur(18px);
      mix-blend-mode: screen;
      background:
        radial-gradient(circle at 50% 55%, rgba(191, 161, 111, .16), transparent 62%),
        radial-gradient(circle at 30% 35%, rgba(0, 168, 89, .10), transparent 58%),
        radial-gradient(circle at 70% 30%, rgba(208, 173, 165, .10), transparent 58%);
    }

    .sprite>img,
    .sprite>.floatWrap>img {
      position: relative;
      z-index: 1;
      width: 100%;
      height: 100%;
      object-fit: var(--fit, contain);
      object-position: var(--pos, 50% 50%);
      display: block;
      filter: drop-shadow(0 12px 18px rgba(0, 0, 0, .35));
    }

    .overlaySlot {
      padding: 0 !important;
      background: transparent !important;
      border: none !important;
      box-shadow: none !important;
      border-radius: 0 !important;
      mix-blend-mode: var(--blend, normal);
      opacity: var(--op, 1);
    }

    /* 中央 UI：做“羊皮纸 + 金属浮雕边 + 高光跟随” */
    .ui {
      position: absolute;
      inset: 0;
      z-index: 6;
      display: flex;
      align-items: center;
      justify-content: center;
      pointer-events: auto;
      transition: opacity .55s ease, transform .55s ease;
    }

    body.entered .ui {
      opacity: 0;
      transform: scale(1.02);
      pointer-events: none;
    }

    .panel {
      width: min(940px, 92vw);
      padding: clamp(20px, 3vw, 38px);
      border-radius: 34px;
      position: relative;
      overflow: hidden;
      text-align: center;

      /* 羊皮纸底 + 金属描边 */
      background:
        radial-gradient(120% 90% at 50% 20%, rgba(255, 255, 255, .20), transparent 55%),
        linear-gradient(180deg, rgba(235, 216, 200, .16), rgba(212, 184, 163, .10)),
        linear-gradient(rgba(0, 0, 0, .36), rgba(0, 0, 0, .28)) padding-box,
        linear-gradient(90deg, rgba(0, 168, 89, .28), rgba(191, 161, 111, .26), rgba(208, 173, 165, .28)) border-box;
      border: 2px solid transparent;

      box-shadow: 0 30px 90px rgba(0, 0, 0, .62);
      backdrop-filter: blur(18px);
    }

    /* 纸张纹理（程序噪声，静态站友好） */
    .panel::after {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      opacity: .22;
      mix-blend-mode: overlay;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='260' height='260'%3E%3Cfilter id='p'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.55' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23p)' opacity='.35'/%3E%3C/svg%3E");
      background-size: 260px 260px;
    }

    /* 指针高光（关键：一下子就“贵”） */
    .panel::before {
      content: "";
      position: absolute;
      inset: -2px;
      pointer-events: none;
      opacity: .90;
      background:
        radial-gradient(240px 220px at var(--mx) var(--my), rgba(191, 161, 111, .20), transparent 62%),
        radial-gradient(260px 220px at calc(var(--mx) + 12%) calc(var(--my) + 6%), rgba(208, 173, 165, .12), transparent 64%),
        radial-gradient(260px 220px at calc(var(--mx) - 12%) calc(var(--my) - 6%), rgba(0, 168, 89, .10), transparent 64%);
      filter: blur(10px);
    }

    .kicker {
      font-family: "Cinzel", serif;
      letter-spacing: .55em;
      text-transform: uppercase;
      font-size: 12px;
      color: rgba(191, 161, 111, .92);
      margin-bottom: 14px;
    }

    .title {
      font-family: "Cinzel", serif;
      font-weight: 700;
      letter-spacing: .26em;
      font-size: clamp(34px, 5vw, 76px);
      margin: 0 0 8px;
      text-shadow: 0 10px 30px rgba(0, 0, 0, .6);

      /* 金属文字 */
      color: transparent;
      background-image: linear-gradient(90deg, rgba(255, 255, 255, .92), rgba(191, 161, 111, .95), rgba(255, 255, 255, .92));
      -webkit-background-clip: text;
      background-clip: text;
    }

    .sub {
      margin: 0 0 22px;
      font-size: clamp(12px, 1.2vw, 18px);
      opacity: .86;
      letter-spacing: .18em;
    }

    .split {
      display: flex;
      justify-content: center;
      gap: 18px;
      align-items: baseline;
      margin-bottom: 26px;
      font-family: "Cinzel", serif;
      letter-spacing: .22em;
    }

    .tagW {
      color: var(--wicked);
      text-shadow: 0 0 24px rgba(0, 168, 89, .28);
      font-size: clamp(20px, 2.8vw, 42px);
    }

    .tagG {
      color: var(--good);
      text-shadow: 0 0 24px rgba(248, 150, 194, .22);
      font-size: clamp(20px, 2.8vw, 42px);
    }

    .tagMid {
      color: rgba(191, 161, 111, .92);
      font-size: clamp(12px, 1.4vw, 18px);
    }

    .btn {
      font-family: "Cinzel", serif;
      letter-spacing: .35em;
      text-transform: uppercase;
      font-size: 12px;
      padding: 14px 28px;
      border-radius: 999px;
      cursor: pointer;
      position: relative;
      overflow: hidden;

      background:
        linear-gradient(#141414, #000) padding-box,
        linear-gradient(90deg, rgba(0, 168, 89, .28), rgba(191, 161, 111, .26), rgba(208, 173, 165, .28)) border-box;
      border: 2px solid transparent;
      color: rgba(191, 161, 111, 1);

      box-shadow: 0 10px 30px rgba(0, 0, 0, .55);
      transition: transform .22s ease, box-shadow .22s ease, filter .22s ease;
    }

    .btn::before {
      content: "";
      position: absolute;
      inset: -2px;
      pointer-events: none;
      opacity: 0;
      transition: opacity .22s ease;
      background: radial-gradient(180px 140px at var(--mx) var(--my), rgba(255, 255, 255, .18), transparent 62%);
    }

    .btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 0 26px rgba(191, 161, 111, .18), 0 14px 34px rgba(0, 0, 0, .58);
      filter: saturate(1.05);
    }

    .btn:hover::before {
      opacity: 1;
    }

    .btn:active {
      transform: translateY(0) scale(.985);
    }


    .frameLayer {
      position: absolute;
      inset: 0;
      z-index: var(--frameZ);
      pointer-events: none;
      display: grid;
      place-items: center;

      /* 可选：让框在投影边缘更安全（避免被屏幕边缘吃掉） */
      padding: clamp(10px, 2.2vmin, 28px);
    }

    .frameLayer img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      /* 关键：边框不裁切 */
      transform: translate3d(0, var(--frameShiftY), 0) scale(var(--frameScale));
      /* 关键：框内收 */
      transform-origin: center;
      opacity: .85;
      filter: blur(.2px);
    }

    .overlayLayer {
      position: absolute;
      inset: 0;
      z-index: 8;
      pointer-events: none;
      mix-blend-mode: screen;
    }

    .overlayLayer img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      opacity: .55;
    }

    @media (max-width:820px) {
      .half {
        width: 100%;
      }

      .right {
        opacity: .9;
      }
    }

    @media (prefers-reduced-motion:reduce) {

      .bg::before,
      .left::after,
      .right::after {
        animation: none !important;
      }

      .sprite.spinSlow img,
      .sprite.spinSlowReverse img {
        animation: none !important;
      }

      .ui {
        transition: none !important;
      }

      .btn,
      .btn::before {
        transition: none !important;
      }
    }
  </style>
</head>

<body>
  <div class="stage">
    <div class="bg">
      <img src="assets/bg_full.webp" alt="" onerror="this.style.display='none'">
    </div>

    <div class="layer">
      <!-- WICKED (left) -->
      <div class="half left">
        <div class="sprite spinSlow" style="--x:10;--y:14;--w:40;--ar:1/1;--fit:contain;--pad:0.12"
          data-name="assets/wicked/wicked_gear_big.png" data-missing="1">
          <img src="assets/wicked/wicked_gear_big.png" alt="" onload="this.parentNode.dataset.missing='0'"
            onerror="this.parentNode.dataset.missing='1'">
        </div>

        <div class="sprite spinSlowReverse" style="--x:26;--y:7;--w:24;--ar:1/1;--fit:contain;--pad:0.14;opacity:.85"
          data-name="assets/wicked/wicked_gear_small.png" data-missing="1">
          <img src="assets/wicked/wicked_gear_small.png" alt="" onload="this.parentNode.dataset.missing='0'"
            onerror="this.parentNode.dataset.missing='1'">
        </div>

        <div class="sprite" style="--x:10;--y:36;--w:26;--ar:1/1;--fit:contain;--pad:0.10"
          data-name="assets/wicked/wicked_potion.png" data-missing="1">
          <img src="assets/wicked/wicked_potion.png" alt="" onload="this.parentNode.dataset.missing='0'"
            onerror="this.parentNode.dataset.missing='1'">
        </div>

        <!-- 大雾：保持静止 -->
        <div class="sprite overlaySlot" data-no-float="1"
          style="--x:-18;--y:18;--w:95;--ar:16/9;--fit:cover;--blend:screen;--op:.55"
          data-name="assets/wicked/wicked_fog.png" data-missing="1">
          <img src="assets/wicked/wicked_fog.png" alt="" onload="this.parentNode.dataset.missing='0'"
            onerror="this.parentNode.dataset.missing='1'">
        </div>

        <!-- broom：注意把长宽比调长，不然 contain 会显得“很小” -->
        <div class="sprite" style="--x:22;--y:76;--w:62;--ar:2/1;--fit:contain;--pad:0.04"
          data-name="assets/wicked/wicked_broom.png" data-missing="1">
          <img src="assets/wicked/wicked_broom.png" alt="" onload="this.parentNode.dataset.missing='0'"
            onerror="this.parentNode.dataset.missing='1'">
        </div>

        <div class="sprite overlaySlot" data-anchor="bottom" data-no-float="1"
          style="--x:-6;--y:0;--w:96;--ar:16/9;--fit:contain;--pos:50% 100%;--op:.95"
          data-name="assets/wicked/wicked_emerald_city.png" data-missing="1">
          <img src="assets/wicked/wicked_emerald_city.png" alt="" onload="this.parentNode.dataset.missing='0'"
            onerror="this.parentNode.dataset.missing='1'">
        </div>
      </div>

      <!-- GOOD (right) -->
      <div class="half right">
        <div class="sprite overlaySlot" data-float="1" data-no-rotate="1"
          style="--x:30;--y:10;--w:55;--ar:1/1;--fit:contain;--op:.95" data-name="assets/good/good_bubbles_1.png"
          data-missing="1">
          <img src="assets/good/good_bubbles_1.png" alt="" onload="this.parentNode.dataset.missing='0'"
            onerror="this.parentNode.dataset.missing='1'">
        </div>

        <div class="sprite overlaySlot" data-float="1" data-no-rotate="1"
          style="--x:52;--y:38;--w:38;--ar:1/1;--fit:contain;--op:.9" data-name="assets/good/good_bubbles_2.png"
          data-missing="1">
          <img src="assets/good/good_bubbles_2.png" alt="" onload="this.parentNode.dataset.missing='0'"
            onerror="this.parentNode.dataset.missing='1'">
        </div>

        <!-- wand：同理，长宽比要更“扁” -->
        <div class="sprite" style="--x:30;--y:30;--w:52;--ar:7/1;--fit:contain;--pad:0.10"
          data-name="assets/good/good_wand.png" data-missing="1">
          <img src="assets/good/good_wand.png" alt="" onload="this.parentNode.dataset.missing='0'"
            onerror="this.parentNode.dataset.missing='1'">
        </div>

        <div class="sprite overlaySlot" data-float="1" data-no-rotate="1"
          style="--x:46;--y:24;--w:22;--ar:1/1;--fit:contain;--blend:screen;--op:.9"
          data-name="assets/good/good_sparkle.png" data-missing="1">
          <img src="assets/good/good_sparkle.png" alt="" onload="this.parentNode.dataset.missing='0'"
            onerror="this.parentNode.dataset.missing='1'">
        </div>

        <div class="sprite overlaySlot" data-float="1" style="--x:60;--y:6;--w:24;--ar:1/1;--fit:contain;--op:.95"
          data-name="assets/good/good_crown.png" data-missing="1">
          <img src="assets/good/good_crown.png" alt="" onload="this.parentNode.dataset.missing='0'"
            onerror="this.parentNode.dataset.missing='1'">
        </div>

        <div class="sprite overlaySlot" data-no-float="1"
          style="--x:-18;--y:18;--w:108;--ar:16/9;--fit:cover;--blend:screen;--op:.45"
          data-name="assets/good/good_glow.png" data-missing="1">
          <img src="assets/good/good_glow.png" alt="" onload="this.parentNode.dataset.missing='0'"
            onerror="this.parentNode.dataset.missing='1'">
        </div>

        <div class="sprite overlaySlot" data-anchor="bottom" data-no-float="1"
          style="--x:24;--y:2;--w:92;--ar:16/10;--fit:contain;--pos:50% 100%;--op:.95"
          data-name="assets/good/good_castle.png" data-missing="1">
          <img src="assets/good/good_castle.png" alt="" onload="this.parentNode.dataset.missing='0'"
            onerror="this.parentNode.dataset.missing='1'">
        </div>

      </div>
    </div>

    <div class="ui">
      <div class="panel">
        <div class="kicker">His Second Trivia Contest</div>
        <h1 class="title">WHO’S STILL STANDING?</h1>
        <p class="sub">贴图尺寸用 % 锁定（相对左右半屏），换图不改布局</p>
        <div class="split">
          <div class="tagW">WICKED</div>
          <div class="tagMid">OR</div>
          <div class="tagG">GOOD</div>
        </div>
        <button class="btn" id="enterBtn">开启魔法仪式</button>
      </div>
    </div>

    <div class="frameLayer">
      <img src="assets/frame/frame_full.png" alt="" onerror="this.style.display='none'">
    </div>
    <div class="overlayLayer">
      <img src="assets/overlays/overlay_glitter.png" alt="" onerror="this.style.display='none'">
    </div>
  </div>

  <script>
    // 视差 + 高光跟随（轻量）
    (function () {
      const reduceMotion = window.matchMedia && window.matchMedia("(prefers-reduced-motion: reduce)").matches;
      if (reduceMotion) return;

      const els = Array.from(document.querySelectorAll(".sprite"));
      let tx = 0, ty = 0, cx = 0, cy = 0;

      function setTarget(x, y) {
        const w = innerWidth, h = innerHeight;
        tx = (x / w - .5) * 2;
        ty = (y / h - .5) * 2;

        document.documentElement.style.setProperty("--mx", (x / w * 100).toFixed(2) + "%");
        document.documentElement.style.setProperty("--my", (y / h * 100).toFixed(2) + "%");
      }

      addEventListener("mousemove", e => setTarget(e.clientX, e.clientY), { passive: true });
      addEventListener("touchmove", e => {
        const t = e.touches && e.touches[0]; if (!t) return;
        setTarget(t.clientX, t.clientY);
      }, { passive: true });

      function raf() {
        cx += (tx - cx) * 0.06;
        cy += (ty - cy) * 0.06;
        els.forEach((el, i) => {
          const depth = (i % 7) + 1;
          el.style.setProperty("--px", (cx * depth * 2.3) + "px");
          el.style.setProperty("--py", (cy * depth * 1.8) + "px");
        });
        requestAnimationFrame(raf);
      }
      raf();
    })();

    // 进入：淡出 UI + 触发事件
    document.getElementById("enterBtn").addEventListener("click", () => {
      document.body.classList.add("entered");
      window.dispatchEvent(new CustomEvent("enter-ritual"));
    });
  </script>

  <script>
    // 随机漂浮：小物件漂，大雾/城堡/大光晕不漂
    (() => {
      const reduceMotion = window.matchMedia && window.matchMedia("(prefers-reduced-motion: reduce)").matches;
      if (reduceMotion) return;

      const animations = new WeakMap();
      const rand = (a, b) => a + Math.random() * (b - a);

      function wrapForFloat(sprite) {
        if (sprite.dataset.noFloat === "1") return null;
        if (sprite.classList.contains("overlaySlot") && sprite.dataset.float !== "1") return null;

        const img = sprite.querySelector("img");
        if (!img) return null;

        let wrap = sprite.querySelector(":scope > .floatWrap");
        if (!wrap) {
          wrap = document.createElement("div");
          wrap.className = "floatWrap";
          sprite.insertBefore(wrap, img);
          wrap.appendChild(img);
        }
        return wrap;
      }

      function applyRandomFloat(sprite) {
        const wrap = wrapForFloat(sprite);
        if (!wrap) return;

        const old = animations.get(wrap);
        if (old) old.cancel();

        const rect = sprite.getBoundingClientRect();
        const base = Math.min(rect.width, rect.height);

        const amp = Math.max(7, Math.min(28, base * 0.06));
        const rot = (sprite.dataset.noRotate === "1") ? 0 : Math.max(0.8, Math.min(6, base * 0.012));
        const dur = rand(4.8, 11.0);
        const delay = -rand(0, dur);

        const kf = [
          { transform: `translate(${rand(-amp, amp)}px, ${rand(-amp, amp)}px) rotate(${rand(-rot, rot)}deg)` },
          { transform: `translate(${rand(-amp, amp)}px, ${rand(-amp, amp)}px) rotate(${rand(-rot, rot)}deg)` },
          { transform: `translate(${rand(-amp, amp)}px, ${rand(-amp, amp)}px) rotate(${rand(-rot, rot)}deg)` },
          { transform: `translate(${rand(-amp, amp)}px, ${rand(-amp, amp)}px) rotate(${rand(-rot, rot)}deg)` },
          { transform: `translate(${rand(-amp, amp)}px, ${rand(-amp, amp)}px) rotate(${rand(-rot, rot)}deg)` },
        ];

        const anim = wrap.animate(kf, {
          duration: dur * 1000,
          iterations: Infinity,
          direction: "alternate",
          easing: "ease-in-out",
          delay: delay * 1000,
        });

        animations.set(wrap, anim);
      }

      function refreshAll() {
        document.querySelectorAll(".sprite").forEach(applyRandomFloat);
      }

      window.addEventListener("load", () => {
        refreshAll();
        window.refreshFloat = refreshAll;
      });

      let t = 0;
      window.addEventListener("resize", () => {
        clearTimeout(t);
        t = setTimeout(refreshAll, 180);
      });
    })();
  </script>
</body>

</html>